<!-- Panel Izquierdo - Workspace Preview 3D -->
<div class="flex flex-col h-full">

    <!-- Header del Panel -->
    <div class="px-4 py-3 border-b border-gray-200 bg-gray-50">
        <h2 class="text-sm font-semibold text-purple-dark flex items-center gap-2">
            <span>üé¨</span>
            <span>Vista Previa 3D</span>
        </h2>
    </div>

    <!-- Estad√≠sticas -->
    <div class="px-4 py-4 space-y-3 border-b border-gray-200">
        <h3 class="text-xs font-semibold text-gray-600 uppercase tracking-wide">Estad√≠sticas</h3>

        <div class="space-y-2 text-xs">
            <div class="flex justify-between items-center">
                <span class="text-gray-600">‚è±Ô∏è Tiempo estimado:</span>
                <span class="font-medium" x-text="estimatedTime || '--'"></span>
            </div>
            <div class="flex justify-between items-center">
                <span class="text-gray-600">üìè Distancia total:</span>
                <span class="font-medium" x-text="totalDistance || '--'"></span>
            </div>
            <div class="flex justify-between items-center">
                <span class="text-gray-600">üî™ Profundidad m√°x:</span>
                <span class="font-medium" x-text="maxDepth || '--'"></span>
            </div>
            <div class="flex justify-between items-center">
                <span class="text-gray-600">üìä L√≠neas G-code:</span>
                <span class="font-medium" x-text="gcodeLines || '--'"></span>
            </div>
        </div>
    </div>

    <!-- Controles de Animaci√≥n -->
    <div class="px-4 py-4 border-b border-gray-200">
        <h3 class="text-xs font-semibold text-gray-600 uppercase tracking-wide mb-3">Animaci√≥n</h3>

        <div class="space-y-3">
            <!-- Botones de Control -->
            <div class="flex items-center justify-center gap-2">
                <button @click="play3DAnimation"
                    :disabled="!gcodeGenerated"
                    class="px-3 py-2 bg-green-500 hover:bg-green-600 text-white rounded-lg text-xs font-medium transition disabled:opacity-50 disabled:cursor-not-allowed">
                    ‚ñ∂Ô∏è Play
                </button>
                <button @click="pause3DAnimation"
                    :disabled="!gcodeGenerated"
                    class="px-3 py-2 bg-yellow-500 hover:bg-yellow-600 text-white rounded-lg text-xs font-medium transition disabled:opacity-50 disabled:cursor-not-allowed">
                    ‚è∏Ô∏è Pause
                </button>
                <button @click="stop3DAnimation"
                    :disabled="!gcodeGenerated"
                    class="px-3 py-2 bg-red-500 hover:bg-red-600 text-white rounded-lg text-xs font-medium transition disabled:opacity-50 disabled:cursor-not-allowed">
                    ‚èπÔ∏è Stop
                </button>
            </div>

            <!-- Slider de Velocidad -->
            <div>
                <label class="text-xs text-gray-600">Velocidad:</label>
                <select x-model="animationSpeed" class="w-full px-2 py-1.5 border border-gray-300 rounded text-xs mt-1">
                    <option value="0.5">0.5x</option>
                    <option value="1">1x</option>
                    <option value="2">2x</option>
                    <option value="5">5x</option>
                    <option value="10">10x</option>
                </select>
            </div>

            <!-- Progress Bar -->
            <div>
                <div class="flex justify-between text-[10px] text-gray-600 mb-1">
                    <span>Progreso</span>
                    <span x-text="animationProgress + '%'">0%</span>
                </div>
                <div class="w-full bg-gray-200 rounded-full h-2">
                    <div class="bg-purple-medium h-2 rounded-full transition-all"
                         :style="'width: ' + animationProgress + '%'"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Controles de Vista 3D -->
    <div class="px-4 py-4 border-b border-gray-200">
        <h3 class="text-xs font-semibold text-gray-600 uppercase tracking-wide mb-3">Vista</h3>

        <div class="grid grid-cols-2 gap-2">
            <button @click="reset3DCamera"
                class="px-3 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg text-xs transition">
                üîÑ Reset
            </button>
            <button @click="set3DView('top')"
                class="px-3 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg text-xs transition">
                ‚¨ÜÔ∏è Top
            </button>
            <button @click="set3DView('front')"
                class="px-3 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg text-xs transition">
                ‚¨ÖÔ∏è Front
            </button>
            <button @click="set3DView('side')"
                class="px-3 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg text-xs transition">
                ‚û°Ô∏è Side
            </button>
        </div>

        <div class="mt-3 space-y-2">
            <label class="flex items-center gap-2 text-xs cursor-pointer">
                <input type="checkbox" x-model="show3DGrid" class="rounded">
                <span>Mostrar grid</span>
            </label>
            <label class="flex items-center gap-2 text-xs cursor-pointer">
                <input type="checkbox" x-model="show3DAxes" class="rounded">
                <span>Mostrar ejes</span>
            </label>
        </div>
    </div>

    <!-- Info Adicional -->
    <div class="flex-1 px-4 py-4 overflow-y-auto">
        <div class="text-xs text-gray-500 space-y-2">
            <p>üí° <strong>Tip:</strong> Usa el mouse para rotar la vista 3D</p>
            <p>Scroll para zoom</p>
            <p>Click derecho para panear</p>
        </div>
    </div>

</div>

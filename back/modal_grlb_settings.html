            <!-- Modal GRBL Settings - Agregar antes del cierre de </div> principal -->
            <div x-show="showGRBLModal"
                @click.self="closeGRBLModal()"
                class="modal-backdrop"
                style="display: none;"
                x-transition>
                <div class="modal-content w-full max-w-4xl" @click.stop>
                    <div
                        class="bg-purple-dark text-white px-6 py-4 rounded-t-lg flex items-center justify-between">
                        <h2 class="text-xl font-bold">‚öôÔ∏è Configuraci√≥n GRBL</h2>
                        <button @click="closeGRBLModal()"
                            class="text-2xl hover:text-purple-pale">&times;</button>
                    </div>

                    <div class="p-6 space-y-4">
                        <!-- Actions -->
                        <div class="flex gap-3">
                            <button @click="loadGRBLSettings()"
                                :disabled="!connected"
                                :class="connected ? 'bg-purple-medium hover:bg-purple-dark' : 'bg-gray-300'"
                                class="px-4 py-2 text-white rounded-lg transition">
                                üîÑ Leer Configuraci√≥n
                            </button>
                            <button @click="saveGRBLSettings()"
                                :disabled="!connected || grblSettings.length === 0"
                                class="px-4 py-2 bg-green-500 hover:bg-green-600 text-white rounded-lg transition disabled:bg-gray-300">
                                üíæ Guardar Cambios
                            </button>
                            <button @click="resetGRBLSettings()"
                                :disabled="!connected"
                                class="px-4 py-2 bg-red-500 hover:bg-red-600 text-white rounded-lg transition disabled:bg-gray-300">
                                ‚ö†Ô∏è Reset a Factory
                            </button>
                        </div>

                        <!-- Search -->
                        <input type="text"
                            x-model="grblSearchQuery"
                            placeholder="üîç Buscar configuraci√≥n..."
                            class="w-full px-4 py-2 border border-gray-300 rounded-lg">

                        <!-- Settings Table -->
                        <div
                            class="h-96 overflow-y-auto border border-gray-300 rounded-lg">
                            <table class="w-full text-sm">
                                <thead
                                    class="bg-purple-ultra-pale sticky top-0">
                                    <tr>
                                        <th
                                            class="px-3 py-2 text-left w-24">C√≥digo</th>
                                        <th
                                            class="px-3 py-2 text-left">Descripci√≥n</th>
                                        <th
                                            class="px-3 py-2 text-left w-32">Valor</th>
                                        <th class="px-3 py-2 w-16">Ayuda</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <template
                                        x-for="setting in filteredGRBLSettings()"
                                        :key="setting.code">
                                        <tr
                                            class="border-b hover:bg-purple-ultra-pale">
                                            <td
                                                class="px-3 py-2 font-mono font-semibold text-purple-medium"
                                                x-text="setting.code"></td>
                                            <td class="px-3 py-2 text-gray-700"
                                                x-text="setting.description"></td>
                                            <td class="px-3 py-2">
                                                <input type="number"
                                                    x-model="setting.value"
                                                    step="0.001"
                                                    class="w-full px-2 py-1 border border-gray-300 rounded text-right font-mono">
                                            </td>
                                            <td class="px-3 py-2 text-center">
                                                <button
                                                    @click="showGRBLHelp(setting)"
                                                    class="text-purple-medium hover:text-purple-dark text-lg"
                                                    title="Ver ayuda">
                                                    ‚ùì
                                                </button>
                                            </td>
                                        </tr>
                                    </template>
                                </tbody>
                            </table>

                            <div x-show="grblSettings.length === 0"
                                class="p-8 text-center text-gray-500">
                                <p>No hay configuraciones cargadas.</p>
                                <p class="text-sm mt-2">Conecta la m√°quina y
                                    presiona "Leer Configuraci√≥n"</p>
                            </div>
                        </div>

                        <!-- Status -->
            u
